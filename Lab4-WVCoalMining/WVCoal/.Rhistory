# try mapping a different variable
tm_shape(WV_Subset) + tm_fill("RtlJb15", palette = "BuPu", style = "jenks", title = "Ave. Mining Employment (2013)") +
tm_borders(alpha=.4) +
tm_compass() +
tm_layout(legend.text.size = 1.1, legend.title.size = 1.5, legend.position = c("left", "top"), frame = FALSE)
# try mapping a different variable
tm_shape(WV_Subset) + tm_fill("RtlJb15", palette = "BuPu", style = "jenks", title = "Ave. Mining Employment (2013)") +
tm_borders(alpha=.4) +
tm_compass() +
tm_layout(legend.text.size = .5, legend.title.size = 1.5, legend.position = c("left", "top"), frame = FALSE)
# try mapping a different variable
tm_shape(WV_Subset) + tm_fill("RtlJb15", palette = "BuPu", style = "jenks", title = "Ave. Mining Employment (2013)") +
tm_borders(alpha=.4) +
tm_compass() +
tm_layout(legend.text.size = .8, legend.title.size = 1.5, legend.position = c("left", "top"), frame = FALSE)
# try mapping a different variable
tm_shape(WV_Subset) + tm_fill("RtlJb15", palette = "BuPu", style = "jenks", title = "Industry Employment (2013)") +
tm_borders(alpha=.4) +
tm_compass() +
tm_layout(legend.text.size = .8, legend.title.size = 1.5, legend.position = c("left", "top"), frame = FALSE)
# try mapping a different variable
tm_shape(WV_Subset) + tm_fill("RtlJb15", palette = "BuPu", style = "jenks", title = "High Risk Empl.") +
tm_borders(alpha=.4) +
tm_compass() +
tm_layout(legend.text.size = .8, legend.title.size = 1.5, legend.position = c("left", "top"), frame = FALSE)
# try mapping a different variable
tm_shape(WV_Subset) + tm_fill("RtlJb15", palette = "BuPu", style = "jenks", title = "High Risk Empl.") +
tm_borders(alpha=.4) +
tm_compass() +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("left", "top"), frame = FALSE)
# try mapping a different variable
tm_shape(WV_Subset) + tm_fill("RtlJb15", palette = "BuPu", style = "jenks", title = "High Risk Empl.") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
# try mapping a different variable
tm_shape(WV_Subset) + tm_fill("RtlJb15", palette = "BuPu", style = "jenks", title = "Retail Industry Emply.") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
# try mapping a different variable
tm_shape(WV_Subset) + tm_fill("RtlJb15", palette = "BuPu", style = "jenks", title = "Retail Industry Empl.") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
# ReMap
Emp13<- tm_shape(WV_Subset) + tm_fill("AveEmp15", palette = "BuPu", style = "jenks", title = "Coal Jobs") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
Emp15<- tm_shape(WV_Subset) + tm_fill("AgMnJb15", palette = "BuPu", style = "jenks", title = "High Risk Jobs") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
# ReMap
Emp13<- tm_shape(WV_Subset) + tm_fill("AveEmp15", palette = "BuPu", style = "jenks", title = "Coal Jobs") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
Emp15<- tm_shape(WV_Subset) + tm_fill("AgMnJb15", palette = "BuPu", style = "jenks", title = "High Risk Jobs") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
current.mode <- tmap_mode("plot")
tmap_arrange(Emp13,Emp15)
# Another Route:
tm_shape(WV_Subset) +
tm_polygons(c("AvEmp13", "AvEmp15"),
style=c("jenks", "jenks"),
palette=list("BuPu", "BuPu"),
auto.palette.mapping=FALSE,
title=c("Mining Jobs in 2013", "Mining Jobs in 2015")) +
tm_facets(ncol=2)
# Another Route:
tm_shape(WV_Subset) +
tm_polygons(c("AvEmp13", "AvEmp15"),
style=c("jenks", "jenks"),
palette=list("BuPu", "BuPu"),
auto.palette.mapping=FALSE,
title=c("Mining Jobs in 2013", "Mining Jobs in 2015")) +
tm_facets(ncol=2)
# ReMap
Emp13<- tm_shape(WV_Subset) + tm_fill("AveEmp15", palette = "BuPu", style = "jenks", title = "Coal Jobs") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
Emp15<- tm_shape(WV_Subset) + tm_fill("AgMnJb15", palette = "BuPu", style = "jenks", title = "High Risk Jobs") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
current.mode <- tmap_mode("plot")
tmap_arrange(Emp13,Emp15)
# ReMap
Emp13<- tm_shape(WV_Subset) + tm_fill("AveEmp15", palette = "BuPu", style = "jenks", title = "Coal Jobs") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
Emp15<- tm_shape(WV_Subset) + tm_fill("AgMnJb15", palette = "BuPu", style = "jenks", title = "High Risk Job %") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
current.mode <- tmap_mode("plot")
tmap_arrange(Emp13,Emp15)
# ReMap
Emp13<- tm_shape(WV_Subset) + tm_fill("AveEmp15", palette = "BuPu", style = "jenks", title = "Coal Mng Jobs") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
Emp15<- tm_shape(WV_Subset) + tm_fill("AgMnJb15", palette = "BuPu", style = "jenks", title = "High Risk Job %") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
current.mode <- tmap_mode("plot")
tmap_arrange(Emp13,Emp15)
# Another Route:
tm_shape(WV_Subset) +
tm_polygons(c("AvEmp13", "AvEmp15"),
style=c("jenks", "jenks"),
palette=list("BuPu", "BuPu"),
auto.palette.mapping=FALSE,
title=c("Mining Jobs in 2013", "Mining Jobs in 2015")) +
tm_facets(ncol=2)
# Another Route:
tm_shape(WV_Subset) +
tm_polygons(c("AvEmp13", "AvEmp15"),
style=c("jenks", "jenks"),
palette=list("BuPu", "BuPu"),
title=c("Mining Jobs in 2013", "Mining Jobs in 2015")) +
tm_facets(ncol=2)
# Another Route:
tm_shape(WV_Subset) +
tm_polygons(c("AveEmp15", "AgMnJb15"),
style=c("jenks", "jenks"),
palette=list("BuPu", "BuPu"),
title=c("Mining Jobs in 2013", "Mining Jobs in 2015")) +
tm_facets(ncol=2)
library(tidyverse)
library(tidycensus)
options(tigris_use_cache = TRUE)
#census_api_key("632cac4c36d7bebfdab1511d2489a205c09fde12", install=TRUE, overwrite = TRUE)
v17 <- load_variables(2015, "acs5", cache = TRUE)
view(v17)
WV_county_medinc <- get_acs(geography = "county",
variables = c(medincome = "B19013_001"),
state = "WV",
year = 2015)
WV_county_medinc
WV_county_medinc %>%
mutate(NAME = gsub(" County, WV", "", NAME)) %>%
ggplot(aes(x = estimate, y = reorder(NAME, estimate))) +
geom_errorbarh(aes(xmin = estimate - moe, xmax = estimate + moe)) +
geom_point(color = "red", size = 3) +
labs(title = "Household income by county in West Virginia",
subtitle = "2011-2015 American Community Survey",
y = "",
x = "ACS estimate (bars represent margin of error)")
#Using the data view, we can find the total industry jobs
# B24031_002
WV_county_medinc.sp <- get_acs(state = "WV",
geography = "county",
variables = "B19013_001",
geometry = TRUE)
head(WV_county_medinc.sp)
WV_county_medinc.sp %>%
ggplot(aes(fill = estimate)) +
geom_sf(color = NA) +
scale_fill_viridis_c(option = "magma")
WV_tracts_medinc.sp <- get_acs(state = "WV",
geography = "tract",
variables = "B19013_001",
geometry = TRUE)
head(WV_tracts_medinc.sp)
WV_tracts_medinc.sp %>%
ggplot(aes(fill = estimate)) +
geom_sf(color = NA) +
scale_fill_viridis_c(option = "magma")
# Set working directory
setwd("~/Desktop/IntroGIS/WVCoalMining/TractAnalysis")
# install.packages(sf)
library(sf)
# Load new census data you plan to join.
Census.Data <-read.csv("ACS_15_5YR_DP03.csv")
# Load the output area shapefiles
County.Areas<- st_read("WV_Counties.shp")
# View the attributes associated with each county
head(County.Areas)
# View the attributes associated with each county
head(Census.Data)
# Joins data to the shapefile
WV_county <- merge(County.Areas, Census.Data, by.x="FIPSSTCO", by.y="GEO.id2")
WV_county
# Joins data to the shapefile
WV_county <- merge(WV_county, WV_county_medinc, by.x="GEOID", by.y="GEO.id2")
WV_county_job <- get_acs(geography = "tract",
variables = c(HighRiskJob = "B08126_002"),
state = "WV",
year = 2015)
WV_county_job
WV_tracts_medinc.sp %>%
ggplot(aes(fill = estimate)) +
geom_sf(color = NA) +
scale_fill_viridis_c(option = "magma")
WV_tract_job <- get_acs(geography = "tract",
variables = c(HighRiskJob = "B08126_002"),
state = "WV",
year = 2015)
WV_tract_job
names(WV_tract_job)[4]<- "AgMnJb15"
WV_tract_job <- get_acs(geography = "tract",
variables = c(HighRiskJob = "B08126_002"),
state = "WV",
year = 2015)
WV_tract_job
names(WV_tract_job)[4]<- "AgMnJb15"
WV_tract_job
WV_tract_job <- get_acs(geography = "tract",
variables = c(HighRiskJob = "B08126_002"),
state = "WV",
year = 2015)
WV_tract_job
names(WV_tract_job)[4]<- "AgMnJb15"
test <- WV_tract_job[,c(1,4)]
WV_tract_job
WV_tract_job <- get_acs(geography = "tract",
variables = c(HighRiskJob = "B08126_002"),
state = "WV",
year = 2015)
WV_tract_job
names(WV_tract_job)[4]<- "AgMnJb15"
test <- WV_tract_job[,c(1,4)]
test
WV_tracts_medinc.sp <- merge(WV_tract_job, test, by="GEOID")
WV_tracts_medinc.sp <- merge(WV_tract_job, test, by="GEOID")
WV_tracts_medinc.sp
WV_tracts_medinc.sp <- merge(WV_tract_job, test, by.x="GEOID", by.y="GEOID")
WV_tracts_medinc.sp
WV_tracts_medinc.sp <- merge(WV_tract_job, test, by.x="GEOID", by.y="GEOID")
WV_tracts_medinc.sp
WV_tracts_medinc.sp <- get_acs(state = "WV",
geography = "tract",
variables = "B19013_001",
geometry = TRUE)
WV_tracts_medinc.sp <- merge(WV_tract_job, test, by.x="GEOID", by.y="GEOID")
WV_tracts_medinc.sp
# View the attributes associated with each county
glimpse(County.Areas)
# View the attributes associated with each county in the CSV data
glimpse(Census.Data)
# View the attributes associated with each county in the CSV data
head(Census.Data)
# View the attributes associated with each county
dim(Census.Data)
str(Census.Data)
# View the attributes associated with each county
dim(Census.Data)
#str(Census.Data)
# Let's further subset the data to make a new, cleaner dataset.
# To uncomplicate things, let's extract data from the original census.
head(Census.Data)
var <- c("GEO.id2","HC01_VC85","HC03_VC50")
names(Census.Subset)[2:4]<- c("MedInc15", "AgMnJb15","RtlJb15")
glimpse(Census.Subset)
# Creates a simple choropleth map of our a AgMnJb15 variable
tm_shape(WV_County) + tm_fill("AgMnJb15")
# Joins data to the shapefile
WV_county <- merge(WV_county, Census.Subset, by.x="GEOID", by.y="GEO.id2")
names(Census.Subset)[2:4]<- c("MedInc15", "AgMnJb15","RtlJb15")
glimpse(Census.Subset)
# Joins data to the shapefile
WV_county <- merge(WV_county, Census.Subset, by.x="GEOID", by.y="GEO.id2")
# Joins data to the shapefile
#WV_county <- merge(WV_county, Census.Subset, by.x="GEOID", by.y="GEO.id2")
head(WV_county)
# Joins data to the shapefile
WV_county <- merge(WV_county, Census.Subset, by.x="FIPSSTCO", by.y="GEO.id2")
head(WV_county)
# Joins data to the shapefile
WV_county <- merge(County.Areas, Census.Subset, by.x="FIPSSTCO", by.y="GEO.id2")
head(WV_county)
library(tmap)
library(leaflet)
# Creates a simple choropleth map of our a AgMnJb15 variable
tm_shape(WV_County) + tm_fill("AgMnJb15")
# Creates a simple choropleth map of our a AgMnJb15 variable
tm_shape(WV_County) + tm_fill("AgMnJb15")
# Creates a simple choropleth map of our a AgMnJb15 variable
tm_shape(WV_county) + tm_fill("AgMnJb15")
# setting a colour palette
tm_shape(WV_County) + tm_fill("HC01_VC85", palette = "-Greens")
# setting a colour palette
tm_shape(WV_county) + tm_fill("HC01_VC85", palette = "-Greens")
# Display the color palette
library(RColorBrewer)
display.brewer.all()
# setting a colour palette
tm_shape(WV_county) + tm_fill("HC01_VC85", palette = "-Greens")
# setting a colour palette
tm_shape(WV_county) + tm_fill("HC01_VC85", palette = "-BrBG")
# setting a colour palette
tm_shape(WV_county) + tm_fill("AgMnJb15", palette = "-BrBG")
# changing the intervals
tm_shape(WV_County) + tm_fill("HC01_VC85", style = "quantile", palette = "Reds")
# changing the intervals
tm_shape(WV_county) + tm_fill("HC01_VC85", style = "quantile", palette = "Reds")
# changing the intervals
tm_shape(WV_county) + tm_fill("AgMnJb15", style = "quantile", palette = "Reds")
# number of levels
tm_shape(WV_county) + tm_fill("AgMnJb15", style = "quantile", n = 7, palette = "Reds")
# changing the intervals
tm_shape(WV_county) + tm_fill("AgMnJb15", style = "quantile", palette = "-BrBG")
# number of levels
tm_shape(WV_county) + tm_fill("AgMnJb15", style = "quantile", n = 7, palette = "-BrBG")
# includes a histogram in the legend
tm_shape(WV) + tm_fill("AgMnJb15", style = "jenks", n=6, palette = "-BrBG", legend.hist = TRUE)
# includes a histogram in the legend
tm_shape(WV_county) + tm_fill("AgMnJb15", style = "jenks", n=6, palette = "-BrBG", legend.hist = TRUE)
# add borders
tm_shape(WV_county) + tm_fill("AgMnJb15", style = "jenks", n=6, palette = "-BrBG") +
tm_borders(alpha=.4)
# north arrow
tm_shape(WV_county) + tm_fill("AgMnJb15", style = "jenks", n=6, palette = "-BrBG") +
tm_borders(alpha=.4) +
tm_compass()
# adds in layout, gets rid of frame
tm_shape(WV_county) + tm_fill("AgMnJb15", palette = "-BrBG", style = "jenks", title = "% Jobs High Risk Employment") +
tm_borders(alpha=.4) +
tm_compass() +
tm_layout(legend.text.size = 1.1, legend.title.size = 1.5, legend.position = c("right", "bottom"), frame = FALSE)
# ReMap
BLS-Data <- tm_shape(WV_county) + tm_fill("AveEmp15", palette = "BuPu", style = "jenks", title = "Coal Mng Jobs") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
# ReMap
BLSData <- tm_shape(WV_county) + tm_fill("AveEmp15", palette = "BuPu", style = "jenks", title = "Coal Mng Jobs") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
ACSData <- tm_shape(WV_county) + tm_fill("AgMnJb15", palette = "BuPu", style = "jenks", title = "High Risk Job %") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
tmap_arrange(BLS-Data,ACS-Data)
# ReMap
BLSData <- tm_shape(WV_county) + tm_fill("AveEmp15", palette = "BuPu", style = "jenks", title = "Coal Mng Jobs") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
ACSData <- tm_shape(WV_county) + tm_fill("AgMnJb15", palette = "BuPu", style = "jenks", title = "High Risk Job %") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
tmap_arrange(BLSData,ACSData)
# ReMap
BLSData <- tm_shape(WV_county) + tm_fill("AveEmp15", palette = "-BrBG", style = "jenks", title = "Coal Mng Jobs") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
ACSData <- tm_shape(WV_county) + tm_fill("AgMnJb15", palette = "-BrBG", style = "jenks", title = "High Risk Job %") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
tmap_arrange(BLSData,ACSData)
# ReMap
BLSData <- tm_shape(WV_county) + tm_fill("AveEmp15", palette = "BuPu", style = "jenks", title = "Coal Mng Jobs") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
ACSData <- tm_shape(WV_county) + tm_fill("AgMnJb15", palette = "BuPu", style = "jenks", title = "High Risk Job %") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
tmap_arrange(BLSData,ACSData)
# Another Route:
tm_shape(WV_county) +
tm_polygons(c("AveEmp15", "AgMnJb15"),
style=c("jenks", "jenks"),
palette=list("BuPu", "BuPu"),
title=c("Coal Mng Jobs", "High Risk Jon %")) +
tm_facets(ncol=2)
# Another Route:
tm_shape(WV_county) +
tm_polygons(c("AveEmp15", "AgMnJb15"),
style=c("jenks", "jenks"),
palette=list("BuPu", "BuPu"),
title=c("Coal Mng Jobs", "High Risk Jobs %")) +
tm_facets(ncol=2)
ACS15var <- load_variables(2015, "acs5", cache = TRUE)
view(ACS14var)
ACS15var <- load_variables(2015, "acs5", cache = TRUE)
view(ACS14var)
WV_county_medinc <- get_acs(geography = "county",
variables = c(medincome = "B19013_001"),
state = "WV",
year = 2015)
WV_county_medinc.sp <- get_acs(state = "WV",
geography = "county",
variables = "B19013_001",
geometry = TRUE)
head(WV_county_medinc.sp)
WV_county_medinc.sp %>%
ggplot(aes(fill = estimate)) +
geom_sf(color = NA) +
scale_fill_viridis_c(option = "magma")
tm_shape(WV_county_medinc.sp) + tm_fill("estimate", palette = "-BrBG")
tm_shape(WV_county_medinc.sp) + tm_fill("estimate", palette = "BuPu")
tm_shape(WV_county_medinc.sp) + tm_fill("estimate", palette = "BuPu", title ="Med Income")
tm_shape(WV_county_medinc.sp) + tm_fill("estimate", palette = "BuPu", title ="Median Income")
WV_tracts_medinc.sp <- get_acs(state = "WV",
geography = "tract",
variables = "B19013_001",
geometry = TRUE)
head(WV_tracts_medinc.sp)
WV_tracts_medinc.sp %>%
ggplot(aes(fill = estimate)) +
geom_sf(color = NA) +
scale_fill_viridis_c(option = "magma")
tm_shape(WV_tracts_medinc.sp) + tm_fill("estimate", palette = "BuPu", title ="Median Income")
View(ACS15var)
tm_shape(WV_tracts_medinc.sp) + tm_fill("estimate", style = "sd", palette = "BuPu", title ="Median Income")
tm_shape(WV_tracts_medinc.sp) + tm_fill("estimate", style = "Jenks", palette = "BuPu", title ="Median Income")
tm_shape(WV_tracts_medinc.sp) + tm_fill("estimate", style = "jenks", palette = "BuPu", title ="Median Income")
# ReMap
WVCounties <- tm_shape(WV_county_mining.sp) + tm_fill("estimate", palette = "BuPu", style = "jenks", title = "Counties") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
WV_county_mining.sp <- get_acs(state = "WV",
geography = "county",
variables = "B24031_002",
geometry = TRUE)
WV_tracts_mining.sp <- get_acs(state = "WV",
geography = "tract",
variables = "B24031_002",
geometry = TRUE)
# ReMap
WVCounties <- tm_shape(WV_county_mining.sp) + tm_fill("estimate", palette = "BuPu", style = "jenks", title = "Counties") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
WVTracts <- tm_shape(WV_tracts_mining.sp) + tm_fill("estimate", palette = "BuPu", style = "jenks", title = "Tracts") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
tmap_arrange(WVCounties,WVTracts)
# ReMap
WVCounties <- tm_shape(WV_county_mining.sp) + tm_fill("estimate", n=4, palette = "-BrBG", style = "jenks", title = "Counties") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
WVTracts <- tm_shape(WV_tracts_mining.sp) + tm_fill("estimate", m=4 palette = "-BrBG", style = "jenks", title = "Tracts") +
# ReMap
WVCounties <- tm_shape(WV_county_mining.sp) + tm_fill("estimate", n=4, palette = "-BrBG", style = "jenks", title = "Counties") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
WVTracts <- tm_shape(WV_tracts_mining.sp) + tm_fill("estimate", n=4, palette = "-BrBG", style = "jenks", title = "Tracts") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
tmap_arrange(WVCounties,WVTracts)
# ReMap
WVCounties <- tm_shape(WV_county_mining.sp) + tm_fill("estimate", n=4, palette = "BuPu", style = "jenks", title = "Counties") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
WVTracts <- tm_shape(WV_tracts_mining.sp) + tm_fill("estimate", n=4, palette = "BuPu", style = "jenks", title = "Tracts") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
tmap_arrange(WVCounties,WVTracts)
# ReMap
WVCounties <- tm_shape(WV_county_mining.sp) + tm_fill("estimate", n=4, palette = "BuPu", style = "jenks", title = "High Risk Jobs") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
WVTracts <- tm_shape(WV_tracts_mining.sp) + tm_fill("estimate", n=4, palette = "BuPu", style = "jenks", title = "High Risk Jobs") +
tm_borders(alpha=.4) +
tm_layout(legend.text.size = .8, legend.title.size = 1.0, legend.position = c("right", "bottom"), frame = FALSE)
tmap_arrange(WVCounties,WVTracts)
names(Census.Subset)[2:4]<- c("MedInc15", "AgMnJb15")
glimpse(Census.Subset)
names(Census.Subset)[2:3]<- c("MedInc15", "AgMnJb15")
glimpse(Census.Subset)
- learn some basics of R to make a more efficient analysis
- work with Census data, and learn to automate some data pulling
- compare data at the tract vs county level
# View the attributes associated with each county
# glimpse(County.Areas)
write.csv(WV_county, "WV_county.csv")
2 + 2
a <- 2+2
a
2 + 2
2 + 2
2 + 2
a <- 2 + 2
a = 2 + 2
a
setwd("~/Desktop/WVCoal")
# Set working directory
setwd("/Users/maryniakolak/Desktop/WVCoal")
# Set working directory
setwd("/Users/maryniakolak/Desktop/WVCoal")
#install.packages("sf")
library(sf)
library(tidyverse)
# Load new census data you plan to join.
Census.Data <-read.csv("ACS_15_5YR_DP03.csv")
str(Census.Data)
# Load the output area shapefiles
County.Areas<- st_read("WV_Counties.shp")
str(County.Areas)
glimpse(County.Areas)
head(County.Areas)
dim(County.Areas)
glimpse(Census.Data)
# install.packages("sf")
library(sf)
library(tidyverse)
# Load new census data you plan to join.
Census.Data <-read.csv("ACS_15_5YR_DP03.csv")
# Load the output area shapefiles
County.Areas<- st_read("WV_Counties.shp")
# View the attributes associated with each county
glimpse(County.Areas)
var <- c("GEO.id2","HC01_VC85","HC03_VC50")
Census.Subset<- (Census.Data[var])
glimpse(Census.Subset)
names(Census.Subset)[2:3]<- c("MedInc15", "AgMnJb15")
glimpse(Census.Subset)
# Joins data to the shapefile
WV_county <- merge(County.Areas, Census.Subset, by.x="FIPSSTCO", by.y="GEO.id2")
head(WV_county)
library(tmap)
library(RColorBrewer)
# Creates a simple choropleth map of our a AgMnJb15 variable
tm_shape(WV_county) + tm_fill("AgMnJb15")
# setting a color palette
tm_shape(WV_county) + tm_fill("AgMnJb15", palette = "-BrBG")
# Display the color palette
display.brewer.all()
display.brewer.all()
